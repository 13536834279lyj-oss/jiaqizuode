<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>全科素养追踪系统</title>
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body class="bg-gradient-to-r from-gray-100 via-gray-50 to-gray-100 min-h-screen">

<div class="max-w-6xl mx-auto p-5">

    <h1 class="text-4xl font-extrabold text-center text-gray-800 mb-10 drop-shadow-md">AI驱动全科素养追踪系统</h1>

    <!-- 过程性评价 -->
    <section class="bg-white rounded-2xl shadow-lg p-6 mb-10 transition-transform hover:scale-[1.01]">
        <h2 class="text-2xl font-semibold text-gray-700 mb-5 border-b pb-2">过程性评价：AI行为数据分析</h2>
        <div class="mb-4">
            <label class="block text-gray-700 mb-2">学生批注内容：</label>
            <textarea id="annotationText" class="w-full h-32 p-3 border border-gray-300 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-300" placeholder="粘贴学生批注内容..."></textarea>
        </div>
        <div class="mb-4">
            <label class="block text-gray-700 mb-2">关键词列表（逗号分隔）：</label>
            <input type="text" id="keywords" class="w-full p-3 border border-gray-300 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-300" placeholder="如：跨学科,批判性思维,科学原理...">
        </div>
        <button id="analyzeBtn" class="bg-blue-500 hover:bg-blue-600 text-white font-semibold py-2 px-6 rounded-lg shadow-md transition duration-200">分析批注</button>
        <div id="processResult" class="mt-6 hidden text-gray-700 bg-gray-50 p-4 rounded-lg shadow-inner">
            <h3 class="text-lg font-medium mb-2">分析结果：</h3>
            <p>批注字数：<span id="wordCount" class="font-semibold"></span></p>
            <p>关键词密度：<span id="keywordDensity" class="font-semibold"></span></p>
            <p>参与深度：<span id="engagementLevel" class="font-semibold"></span></p>
        </div>
    </section>

    <!-- 终结性评价 -->
    <section class="bg-white rounded-2xl shadow-lg p-6 mb-10 transition-transform hover:scale-[1.01]">
        <h2 class="text-2xl font-semibold text-gray-700 mb-5 border-b pb-2">终结性评价：素养雷达图</h2>
        <div class="grid grid-cols-1 sm:grid-cols-2 gap-6 mb-6">
            <div>
                <label class="block text-gray-700 mb-2">语言表达：</label>
                <input type="range" id="language" min="0" max="100" value="70" class="w-full">
                <span id="languageValue" class="text-sm font-medium">70</span>
            </div>
            <div>
                <label class="block text-gray-700 mb-2">逻辑推理：</label>
                <input type="range" id="logic" min="0" max="100" value="65" class="w-full">
                <span id="logicValue" class="text-sm font-medium">65</span>
            </div>
            <div>
                <label class="block text-gray-700 mb-2">科学探究：</label>
                <input type="range" id="science" min="0" max="100" value="80" class="w-full">
                <span id="scienceValue" class="text-sm font-medium">80</span>
            </div>
            <div>
                <label class="block text-gray-700 mb-2">艺术表现：</label>
                <input type="range" id="art" min="0" max="100" value="75" class="w-full">
                <span id="artValue" class="text-sm font-medium">75</span>
            </div>
            <div>
                <label class="block text-gray-700 mb-2">数字素养：</label>
                <input type="range" id="digital" min="0" max="100" value="85" class="w-full">
                <span id="digitalValue" class="text-sm font-medium">85</span>
            </div>
        </div>
        <button id="generateRadarBtn" class="bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-6 rounded-lg shadow-md transition duration-200">生成雷达图</button>
        <div class="mt-6">
            <canvas id="radarChart" class="w-full h-80"></canvas>
        </div>
    </section>

    <!-- 成长档案 -->
    <section class="bg-white rounded-2xl shadow-lg p-6 transition-transform hover:scale-[1.01]">
        <h2 class="text-2xl font-semibold text-gray-700 mb-5 border-b pb-2">成长档案：素养发展曲线</h2>
        <div class="mb-4">
            <label class="block text-gray-700 mb-2">选择学生：</label>
            <select id="studentSelect" class="w-full p-2 border border-gray-300 rounded-lg shadow-sm focus:ring-2 focus:ring-purple-300">
                <option value="1">学生A</option>
                <option value="2">学生B</option>
                <option value="3">学生C</option>
            </select>
        </div>
        <button id="showGrowthBtn" class="bg-purple-500 hover:bg-purple-600 text-white font-semibold py-2 px-6 rounded-lg shadow-md transition duration-200">查看成长曲线</button>
        <div class="mt-6">
            <canvas id="growthChart" class="w-full h-64"></canvas>
        </div>
    </section>
</div>

<script>
/* -------------------- 过程性评价 -------------------- */
function analyzeAnnotation() {
    const annotation = document.getElementById('annotationText').value.trim();
    const keywords = document.getElementById('keywords').value.split(',').map(k => k.trim()).filter(Boolean);
    if (!annotation || keywords.length === 0) return alert('请输入批注内容和关键词');

    const wordCount = annotation.length;
    const keywordCount = keywords.reduce((c, k) => c + (annotation.toLowerCase().includes(k.toLowerCase()) ? 1 : 0), 0);
    const keywordDensity = (keywordCount / keywords.length * 100).toFixed(2) + '%';
    const engagementLevel = (wordCount > 200 && keywordCount / keywords.length > 0.6) ? '深度学习' : '浅层参与';

    document.getElementById('wordCount').textContent = wordCount;
    document.getElementById('keywordDensity').textContent = keywordDensity;
    document.getElementById('engagementLevel').textContent = engagementLevel;
    document.getElementById('processResult').classList.remove('hidden');
}
document.getElementById('analyzeBtn').addEventListener('click', analyzeAnnotation);

/* -------------------- 终结性评价雷达图 -------------------- */
const radarCtx = document.getElementById('radarChart').getContext('2d');
let radarChart = null;
const skills = ['language','logic','science','art','digital'];
function createRadarChart(values) {
    if (radarChart) radarChart.destroy();
    radarChart = new Chart(radarCtx, {
        type: 'radar',
        data: { 
            labels:['语言表达','逻辑推理','科学探究','艺术表现','数字素养'], 
            datasets:[{
                label:'素养评分',
                data:values,
                backgroundColor: 'rgba(54,162,235,0.3)',
                borderColor:'rgba(54,162,235,1)',
                borderWidth:2,
                pointBackgroundColor:'rgba(54,162,235,1)',
                pointHoverRadius:6,
                tension:0.3
            }]
        },
        options: { 
            responsive:true,
            plugins:{ tooltip:{ enabled:true } },
            scales:{ r:{ min:0, max:100, ticks:{ stepSize:20 }, angleLines:{ color:'#ccc' }, grid:{ color:'#eee' } } }
        }
    });
}
skills.forEach(id=>{
    const slider = document.getElementById(id);
    const span = document.getElementById(`${id}Value`);
    slider.addEventListener('input', ()=>span.textContent=slider.value);
});
document.getElementById('generateRadarBtn').addEventListener('click', ()=>{
    const values = skills.map(id=>parseInt(document.getElementById(id).value));
    createRadarChart(values);
});

/* -------------------- 成长档案曲线 -------------------- */
const growthCtx = document.getElementById('growthChart').getContext('2d');
let growthChart = null;
document.getElementById('showGrowthBtn').addEventListener('click', ()=>{
    const studentData = { '1':[65,70,75,80,85],'2':[55,60,68,72,78],'3':[70,75,80,82,88] };
    const selected = document.getElementById('studentSelect').value;
    if(growthChart) growthChart.destroy();
    growthChart = new Chart(growthCtx,{
        type:'line',
        data:{ labels:['第1周','第2周','第3周','第4周','第5周'], datasets:[{
            label:'综合素养得分',
            data:studentData[selected],
            fill:true,
            backgroundColor: 'rgba(153,102,255,0.2)',
            borderColor:'rgb(153,102,255)',
            tension:0.2,
            pointHoverRadius:6
        }]},
        options:{
            responsive:true,
            plugins:{ tooltip:{ enabled:true } },
            scales:{ y:{ min:50, max:100 } }
        }
    });
});
</script>
</body>
</html>
